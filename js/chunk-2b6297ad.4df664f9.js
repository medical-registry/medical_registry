(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b6297ad"],{"0dbe":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.tabs?a("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[a("v-toolbar",{staticClass:"mb-1",attrs:{flat:"",elevation:"2"},scopedSlots:e._u([{key:"default",fn:function(){return[a("v-tabs",{attrs:{centered:"","icons-and-text":"",grow:"",md12:"",outlined:"","hide-slider":"","active-class":"active-lab-exam-tab"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t,n,i){return a("v-tab",{key:i,attrs:{href:"#tab-"+i}},[e._v(" "+e._s(t.macro_category)+" ")])})),1)]},proxy:!0}],null,!1,671576154)}),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(e,t,n){return a("v-tab-item",{key:n,attrs:{value:"tab-"+n}},[a("NonLabExams",{attrs:{section:e}})],1)})),1)],1):e._e()},i=[],r=(a("c975"),a("d81d"),a("13d5"),a("ac1f"),a("5319"),a("96cf"),a("1da1")),o=a("f773"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.section?a("v-container",{staticClass:"pa-0 pt-0 pb-10",attrs:{fluid:""}},[a("v-tabs",{staticClass:"pa-0 pl-10",attrs:{vertical:"",color:"primary"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-container",{staticClass:"py-12 pl-0 vertical-category-wrapper"},e._l(e.section.categories,(function(t,n){return a("v-tab",{key:n,staticClass:"non-lab-category-tab",attrs:{href:"#tab-"+e.section.key+"-"+n}},[e._v(" "+e._s(t)+" ")])})),1),e._l(e.section.categories,(function(t,n){return a("v-tab-item",{key:n,attrs:{value:"tab-"+e.section.key+"-"+n}},[a("v-card",{staticClass:"pt-0",attrs:{flat:"",grow:""}},[a("v-card-text",{staticClass:"pt-0"},[a("NonLabExamCategoryTab",{attrs:{category:t,macro_category:e.section.macro_category}})],1)],1)],1)}))],2)],1):e._e()},l=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{attrs:{elevation:"0"}},[a("v-container",{class:e.timelineItems&&e.timelineItems.length>0?"text-right":"text-center"},[a("AddNonLabExamDialog",{attrs:{macro_category:e.macro_category,category:e.category,units:[],user_id:e.userId,addButtonAlign:e.timelineItems&&e.timelineItems.length>0?"text-right":"text-center"},on:{created:e.fetchExams}})],1),e.timelineItems&&Object.keys(e.timelineItems).length>0?a("v-container",[a("v-timeline",{attrs:{"align-top":"",dense:""}},e._l(e.timelineItems,(function(t){return a("NonLabExamItem",{key:t.id_care,attrs:{group:t,category:e.category,macro_category:e.macro_category,units:[],"user-id":e.userId},on:{delete:e.fetchExams,change:e.fetchExams}})})),1)],1):e._e()],1)],1)},u=[],m=(a("4de4"),a("19f6")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-timeline-item",{attrs:{small:""}},[a("v-card",{staticClass:"elevation-3"},[a("v-card-title",{staticClass:"headline capitalized"},[a("v-row",[e.group.to?a("v-col",{attrs:{md9:""}},[e._v(" Dal "+e._s(e.formatDate(e.group.from))+" al "+e._s(e.formatDate(e.group.to))+" ")]):a("v-col",{attrs:{md9:""}},[e._v(" "+e._s(e.formatDate(e.group.from))),e.group.time?a("span",[e._v(", ore "+e._s(e.group.time))]):e._e()]),a("v-col",{staticClass:"text-right",attrs:{md3:""}},[a("AddNonLabExamDialog",{attrs:{editing:!0,macro_category:e.group.macro_category,category:e.group.category,user_id:e.userId,"initial-value":e.group,"add-button-align":"text-right"},on:{updated:e.handleChange}}),a("v-btn",{attrs:{color:"error",fab:"","x-small":"",dark:"",elevation:"0"},on:{click:e.deleteExam}},[a("v-icon",[e._v("mdi-close")])],1)],1)],1)],1),a("v-card-text",[a("span",{staticClass:"capitalized"},[a("span",{staticClass:"title"},[e._v(e._s(e.group.def.name.toLowerCase()))]),a("br")]),a("span",{staticClass:"text-subtitle-1"},[a("strong",[e._v("Quesito: ")]),a("span",{staticClass:"capitalized"},[e._v(" "+e._s(e.group.diagnostic_question.toLowerCase())+" ")])]),e.group.requisites?a("p",[a("strong",[e._v("Requisiti: ")]),a("span",[e._v(e._s(e.group.requisites))]),a("br")]):e._e(),e.group.note?a("p",{staticClass:"mt-3"},[a("strong",[e._v("Esito")]),a("br"),a("span",[e._v(e._s(e.group.note))])]):e._e()])],1)],1)},g=[],f=a("c1df"),v=a.n(f),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"800px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[e.editing?a("v-btn",e._g(e._b({staticClass:"mr-2",attrs:{color:"primary",fab:"","x-small":"",dark:"",elevation:"0"}},"v-btn",i,!1),n),[a("v-icon",[e._v("mdi-pencil")])],1):a("v-btn",e._g(e._b({attrs:{color:"primary lighten-1",dark:""}},"v-btn",i,!1),n),[e._v(" Aggiungi Esame ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[e.editing?a("v-card-title",[e._v("Aggiorna Esame")]):a("v-card-title",[e._v("Aggiungi Esame")]),a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-text",[e.examsTypes&&!e.editing?a("v-select",{attrs:{items:e.examsTypes,required:"","item-text":"name","item-value":"id",label:"Tipologia Esame *",rules:[function(e){return!!e||"Seleziona Tipologia esame"}],"prepend-icon":"mdi-magnify"},model:{value:e.exam.id_exam,callback:function(t){e.$set(e.exam,"id_exam",t)},expression:"exam.id_exam"}}):e._e(),a("v-text-field",{attrs:{"prepend-icon":"mdi-help-circle-outline",label:"Quesito Diagnostico *",rules:[function(e){return!!e&&e.length>0||"Inserisci Quesito Diagnostico"}],required:""},model:{value:e.exam.diagnostic_question,callback:function(t){e.$set(e.exam,"diagnostic_question",t)},expression:"exam.diagnostic_question"}}),a("v-text-field",{attrs:{"prepend-icon":"mdi-clipboard-check-multiple-outline",hint:"Esempio: Digiuno",label:"Requisiti"},model:{value:e.exam.requisites,callback:function(t){e.$set(e.exam,"requisites",t)},expression:"exam.requisites"}}),a("v-row",[a("v-col",{attrs:{md:"2"}},[a("v-checkbox",{attrs:{label:"Intervallo"},on:{change:function(t){return e.resetDates()}},model:{value:e.interval,callback:function(t){e.interval=t},expression:"interval"}})],1),e.interval?a("v-col",{attrs:{md:"10"}},[a("v-menu",{attrs:{md10:"",xl10:"","close-on-content-click":!1,"nudge-right":30,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-text-field",e._g(e._b({staticClass:"capitalized",attrs:{value:e.dateRangeText,label:"Date *",hint:"Intervallo di date in cui l'esame é stato eseguito","prepend-icon":"event",readonly:"",rules:[function(e){return!!e||"Seleziona intervallo"}]}},"v-text-field",i,!1),n))]}}],null,!1,2162950961),model:{value:e.dateDialog,callback:function(t){e.dateDialog=t},expression:"dateDialog"}},[a("v-date-picker",{attrs:{min:e.dateRange&&e.dateRange[0],range:"","no-title":"",locale:"it-it"},on:{change:e.handleSelection},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)],1):a("v-col",{attrs:{md:"7"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-text-field",e._g(e._b({staticClass:"capitalized",attrs:{value:e.singleDateText,label:"Data *","prepend-icon":"mdi-calendar",readonly:"",rules:[function(t){return!e.interval&&!!t||"Seleziona Data"}]}},"v-text-field",i,!1),n))]}}]),model:{value:e.singleDateDialog,callback:function(t){e.singleDateDialog=t},expression:"singleDateDialog"}},[a("v-date-picker",{attrs:{"no-title":"",locale:"it-it"},on:{change:e.handleSelection},model:{value:e.singleDate,callback:function(t){e.singleDate=t},expression:"singleDate"}})],1)],1),e.interval?e._e():a("v-col",{attrs:{md:"3"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":30,"return-value":e.timePicker,transition:"scale-transition","offset-y":""},on:{"update:returnValue":function(t){e.timePicker=t},"update:return-value":function(t){e.timePicker=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Ora",hint:"Ore a cui é stato eseguito l'esame","prepend-icon":"mdi-clock-time-four-outline",readonly:""},model:{value:e.exam.time,callback:function(t){e.$set(e.exam,"time",t)},expression:"exam.time"}},"v-text-field",i,!1),n))]}}],null,!1,3073056480),model:{value:e.timePicker,callback:function(t){e.timePicker=t},expression:"timePicker"}},[e.timePicker?a("v-time-picker",{attrs:{"full-width":"",format:"24hr","no-title":""},on:{"click:minute":function(t){return e.$refs.menu.save(e.exam.time)}},model:{value:e.exam.time,callback:function(t){e.$set(e.exam,"time",t)},expression:"exam.time"}}):e._e()],1)],1)],1),"LABORATORIO ALTRO"!==e.macro_category?a("v-textarea",{staticClass:"mt-5",attrs:{outlined:"",placeholder:"Note",label:"Note"},model:{value:e.exam.note,callback:function(t){e.$set(e.exam,"note",t)},expression:"exam.note"}}):a("v-textarea",{staticClass:"mt-5",attrs:{outlined:"",placeholder:"Esito",label:"Esito *",rules:[function(e){return!!e||"Aggiungi Esito"}]},model:{value:e.exam.note,callback:function(t){e.$set(e.exam,"note",t)},expression:"exam.note"}})],1),a("v-card-actions",{staticClass:"px-5 pb-5"},[a("v-btn",{attrs:{color:"error"},on:{click:e.cancel}},[e._v("Annulla")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",disabled:!e.valid},on:{click:e.save}},[e._v("Salva")])],1)],1)],1)],1)},x=[],h=(a("99af"),a("b0c0"),a("5530")),b=a("3835"),_={diagnostic_question:null,note:null,body_impacted:null,from:null,to:null,id_exam:null,time:null,id_location:null,id_doctor:null,requisites:null,receipit_code:null},y={name:"AddNonLabExamDialog",components:{},props:{macro_category:null,category:null,user_id:null,units:null,initialValue:null,editing:{type:Boolean,default:!1},addButtonAlign:{type:String,default:"text-left"}},computed:{dateRangeText:function(){if(!this.dateRange||this.dateRange.length<2)return null;var e=Object(b["a"])(this.dateRange,2),t=e[0],a=e[1];return"Dal ".concat(v()(t).format("LL")," Al ").concat(v()(a).format("LL"))},singleDateText:function(){return this.singleDate?v()(this.singleDate).format("LL"):null}},created:function(){this.fetchCategories()},methods:{handleCategoryChange:function(){this.def=null,this.$refs.searchExamDef&&this.$refs.searchExamDef.reset()},cancel:function(){this.dialog=!1,this.reset()},updateExamDef:function(e){e&&(this.def=e,this.exam.id_exam=e.id)},resetDates:function(){this.dateDialog=!1,this.timePicker=!1,this.singleDateDialog=!1,this.exam.from=null,this.exam.to=null,this.exam.time=null,this.dateRange=null,this.singleDate=null},handleSelection:function(){if(this.interval){this.dateDialog=!1;var e=Object(b["a"])(this.dateRange,2),t=e[0],a=e[1];this.exam.from=t,this.exam.to=a}else this.singleDateDialog=!1,this.exam.from=this.singleDate,this.exam.to=null},reset:function(){this.editing||this.$refs.form.reset(),this.dialog=!1,this.dateDialog=!1,this.dateRange=null,this.timePicker=!1,this.valid=!1,this.resetDates(),this.exam=this.buildFormValues()},save:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.database.exams.put(e.exam);case 2:return a=t.sent,t.next=5,e.database.exams.get(a);case 5:n=t.sent,e.editing?(e.$emit("updated",n),e.dialog=!1):(e.$emit("created",n),e.reset());case 7:case"end":return t.stop()}}),t)})))()},buildFormValues:function(){var e=Object(h["a"])(Object(h["a"])({},_),{},{id_person:this.user_id,category:this.category,macro_category:this.macro_category});return this.editing&&this.initialValue&&(e=Object(h["a"])({},this.initialValue),this.valid=!0,this.dateRange=this.editing&&e.to?[e.from,e.to]:null,this.interval=!(!this.editing||!e.to),this.singleDate=this.editing&&!e.to?e.from:null),e},fetchCategories:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].register.get(e.user_id);case 2:return e.userProfile=t.sent,t.next=5,o["a"].exam_register.where({macro_category:e.macro_category,category:e.category}).and((function(t){return t.sex===e.userProfile.sex||"A"===t.sex})).toArray();case 5:e.examsTypes=t.sent,e.examsTypes.sort((function(e,t){return e.name.localeCompare(t.name)}));case 7:case"end":return t.stop()}}),t)})))()}},data:function(){var e=this.buildFormValues();return{def:this.editing?this.initialValue.def:null,database:o["a"],dialog:!1,valid:!1,dateDialog:!1,singleDateDialog:!1,timePicker:!1,dateRange:this.editing&&e.to?[e.from,e.to]:null,interval:!(!this.editing||!e.to),singleDate:this.editing&&!e.to?e.from:null,exam:e,examsTypes:null}}},k=y,D=a("2877"),C=a("6544"),V=a.n(C),w=a("8336"),E=a("b0af"),T=a("99d9"),R=a("ac7c"),I=a("62ad"),L=a("2e4b"),O=a("169a"),A=a("4bd4"),$=a("132d"),N=a("e449"),j=a("0fd9"),q=a("b974"),S=a("2fa4"),P=a("8654"),z=a("a844"),B=a("c964"),F=Object(D["a"])(k,p,x,!1,null,"94b75222",null),Q=F.exports;V()(F,{VBtn:w["a"],VCard:E["a"],VCardActions:T["a"],VCardText:T["b"],VCardTitle:T["c"],VCheckbox:R["a"],VCol:I["a"],VDatePicker:L["a"],VDialog:O["a"],VForm:A["a"],VIcon:$["a"],VMenu:N["a"],VRow:j["a"],VSelect:q["a"],VSpacer:S["a"],VTextField:P["a"],VTextarea:z["a"],VTimePicker:B["a"]});var J={name:"NonLabExamItem",components:{AddNonLabExamDialog:Q},props:{group:null,category:{},macro_category:{},units:{},userId:{}},methods:{formatDate:function(e){return v()(e).format("LL")},deleteExam:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].exams.where({id_care:e.group.id_care}).delete();case 2:e.$emit("delete");case 3:case"end":return t.stop()}}),t)})))()},handleNewItem:function(){this.adding=!1,this.$emit("change")},handleChange:function(){this.$emit("change")}},data:function(){return{adding:!1}}},M=J,U=a("1e06"),G=Object(D["a"])(M,d,g,!1,null,null,null),H=G.exports;V()(G,{VBtn:w["a"],VCard:E["a"],VCardText:T["b"],VCardTitle:T["c"],VCol:I["a"],VIcon:$["a"],VRow:j["a"],VTimelineItem:U["a"]});var K={name:"NonLabExamCategoryTab",components:{AddNonLabExamDialog:Q,NonLabExamItem:H},props:{category:null,macro_category:null},created:function(){this.fetchExams()},methods:{fetchExams:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].fetchUserExams(e.userId,e.noValueExamView);case 2:a=t.sent,e.timelineItems=a.filter((function(t){return(!e.category||e.category===t.category)&&t.macro_category===e.macro_category})).sort((function(e,t){return new Date(t.from).getTime()-new Date(e.from).getTime()}));case 4:case"end":return t.stop()}}),t)})))()}},data:function(){return{timelineItems:null,userId:this.$store.state.user.id}}},W=K,X=a("a523"),Y=a("8414"),Z=Object(D["a"])(W,c,u,!1,null,"571c3ebd",null),ee=Z.exports;V()(Z,{VCard:E["a"],VContainer:X["a"],VTimeline:Y["a"]});var te={name:"NonLabExams",components:{NonLabExamCategoryTab:ee},props:{section:null},data:function(){return{tab:"tab-".concat(this.section.key,"-0")}}},ae=te,ne=(a("a925"),a("71a3")),ie=a("c671"),re=a("fe57"),oe=Object(D["a"])(ae,s,l,!1,null,"520b25e8",null),se=oe.exports;V()(oe,{VCard:E["a"],VCardText:T["b"],VContainer:X["a"],VTab:ne["a"],VTabItem:ie["a"],VTabs:re["a"]});var le={name:"LabExam",components:{NonLabExams:se},created:function(){this.fetchCategories()},methods:{fetchCategories:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].exam_register.where("macro_category").noneOf(["LABORATORIO","LABORATORIO ALTRO"]).toArray();case 2:a=t.sent,e.tabs=a.map((function(e){return{macro_category:e.macro_category,category:e.category,key:e.macro_category.toLowerCase().replace(" ","_")}})).reduce((function(e,t){return e&&!e[t.key]?e[t.key]={macro_category:t.macro_category,categories:[t.category]}:e[t.key].categories.indexOf(t.category)<0&&e[t.key].categories.push(t.category),e}),{});case 4:case"end":return t.stop()}}),t)})))()}},data:function(){return{tabs:null,tab:null,user:this.$store.state.user}}},ce=le,ue=(a("1c9f"),a("aac8")),me=a("71d9"),de=Object(D["a"])(ce,n,i,!1,null,"636cb1ff",null);t["default"]=de.exports;V()(de,{VContainer:X["a"],VTab:ne["a"],VTabItem:ie["a"],VTabs:re["a"],VTabsItems:ue["a"],VToolbar:me["a"]})},"1c9f":function(e,t,a){"use strict";var n=a("cbea"),i=a.n(n);i.a},a925:function(e,t,a){"use strict";var n=a("b9aa"),i=a.n(n);i.a},b9aa:function(e,t,a){},cbea:function(e,t,a){}}]);
//# sourceMappingURL=chunk-2b6297ad.4df664f9.js.map